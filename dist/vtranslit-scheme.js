#!/usr/bin/env node
!function(e){var n={};function r(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=n,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)r.d(t,o,function(n){return e[n]}.bind(null,o));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="",r(r.s=7)}([function(e,n){e.exports=require("path")},function(e,n){e.exports=require("clean-webpack-plugin")},function(e,n){e.exports=require("webpack")},function(e,n){e.exports=require("fs")},function(e,n){e.exports=require("ajv")},function(e,n){e.exports=require("js-yaml")},function(e){e.exports=JSON.parse('{"definitions":{"charMap":{"type":"object","additionalProperties":{"type":["string","array"]}}},"type":"object","properties":{"code":{"type":"string","maxLength":4,"minLength":4},"name":{"type":"string"},"type":{"type":"string","enum":["brahmic","roman"]},"unicodeBlock":{"type":"string"},"map":{"properties":{"ayogavaha":{"$ref":"#/definitions/charMap"},"consonants":{"$ref":"#/definitions/charMap"},"symbols":{"$ref":"#/definitions/charMap"},"vowelMarks":{"$ref":"#/definitions/charMap"},"vowels":{"$ref":"#/definitions/charMap"}},"required":["ayogavaha","consonants","symbols","vowelMarks","vowels"]}},"required":["code","name","type","unicodeBlock"]}')},function(e,n,r){"use strict";r.r(n);var t,o,i,a=r(0),c=r.n(a),u=console,s=u.info,f=u.error,l=function(e){return function(n){return Array.isArray(n)?n.forEach((function(n){return e("\n".concat(n))})):e("\n".concat(n))}},p={info:l(s),error:l(f)},d=r(1),m=r(2),h=r.n(m),y=function(e){return new Promise((function(n,r){return h()(e,(function(t,o){(t||o.hasErrors())&&r("SchemeBuildError: WebpackError: \n".concat(t||o.compilation.errors)),n(e)}))}))},b={loader:"babel-loader",options:{presets:["@babel/preset-env"]}},v=function(e){return c.a.relative(process.cwd(),e)},g=function(e){var n=e.entry,r=e.output,t=v(n),o=v(r.path),i=v(r.filename);p.info('SchemeBuild: "'.concat(t,'" is converted and written to "').concat(o,"/").concat(i,'."'))},w=r(3),j=r(4),x=r.n(j),M=r(5),P=r.n(M),S=r(6),O=function(e){return new Promise((function(n){return n(P.a.safeLoad(e))}))},k=new x.a({allErrors:!0}).compile(S),q=function(e){return new Promise((function(n,r){k(e)||r(k.errors.map((function(e){var n=e.dataPath,r=e.message,t=e.params;return'SchemeValidationError: "'.concat(n,'" in scheme ').concat(r,". Rule: ").concat(JSON.stringify(t))}))),n()}))},E=function(){return p.info("\nSchemeValidation: No problems in the scheme.")},_=function(e){return function(e){return w.promises.readFile(e,"utf-8")}(e).then(O).then(q).then(E)},B=process.argv[2],$="\nUsage: vtranslit-scheme <command>\n\nwhere, <command> is one of:\n  build     Bu vtranslit schemes written in YAML as a library.\n  validate  Validate vtranslit scheme structure. \n",L=c.a.join(process.cwd(),"./src/scheme.yml"),A=c.a.join(process.cwd(),"./dist");B?"build"===B?_(L).then((t=L,o=A,i="scheme.js",function(){return new Promise((function(e,n){(function(e,n,r){return new Promise((function(t){return t({entry:e,mode:"production",module:{rules:[{use:[b,"vtranslit-scheme-loader"]}]},plugins:[new d.CleanWebpackPlugin],output:{filename:r,libraryTarget:"umd",globalObject:"this",path:n}})}))})(t,o,i).then(y).then(g).then(e).catch(n)}))})).catch(p.error):"validate"===B?_(L).catch(p.error):p.info('\nError: "'.concat(B,'" a not valid command. \n').concat($)):p.info($)}]);